<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SatoshiNostr - Sovereign Debt Redemption Protocol</title>
    <style>
        body { background-color: #000; color: #d4af37; font-family: 'Courier New', Courier, monospace; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .container { border: 2px solid #d4af37; padding: 40px; border-radius: 10px; text-align: center; width: 450px; box-shadow: 0 0 20px rgba(212, 175, 55, 0.2); }
        h1 { font-size: 2rem; margin-bottom: 5px; letter-spacing: 3px; }
        p.subtitle { font-size: 0.8rem; margin-bottom: 30px; opacity: 0.8; }
        .input-group { margin-bottom: 20px; text-align: left; }
        label { display: block; margin-bottom: 10px; font-size: 0.9rem; text-align: center;}
        input, textarea { width: 100%; background: #111; border: 1px solid #d4af37; color: #fff; padding: 10px; box-sizing: border-box; border-radius: 5px; text-align: center; font-family: inherit; }
        textarea { height: 100px; resize: none; text-align: left; }
        .price { margin: 20px 0; color: #d4af37; font-weight: bold; min-height: 3em; line-height: 1.4; }
        .price small { font-size: 0.8rem; opacity: 0.9; display: block; margin-top: 5px; }
        .sign-button { background-color: #d4af37; color: #000; border: none; padding: 15px 30px; font-weight: bold; cursor: pointer; width: 100%; border-radius: 5px; text-transform: uppercase; transition: 0.3s; }
        .sign-button:hover { background-color: #f1c40f; box-shadow: 0 0 10px #d4af37; }
    </style>
</head>
<body>

<div class="container">
    <h1>SATOSHINOSTR</h1>
    <p class="subtitle">Sovereign Debt Redemption Protocol V 1.0</p>

    <div class="input-group">
        <label>Founder Node Number (1-500):</label>
        <input type="number" id="nodeNumber" placeholder="Ej: 1">
    </div>

    <div class="input-group">
        <label>Your Proclamation of Independence:</label>
        <textarea id="proclamation" placeholder="Write your sovereignty declaration here..."></textarea>
    </div>

    <div class="price" id="priceDisplay">Price: -- BTC</div>

    <button class="sign-button" id="issueContract">SIGN AND ISSUE CONTRACT</button>
</div>

<script>
    const nodeInput = document.getElementById('nodeNumber');
    const priceDisplay = document.getElementById('priceDisplay');

    function updatePrice() {
        const n = parseInt(nodeInput.value);
        if (!n || n < 1) {
            priceDisplay.innerHTML = "Price: -- BTC";
            return;
        }

        let btcPrice, satsPrice;

        if (n <= 500) {
            // Curva para Nodo 1 = 100 BTC y Nodo 500 = 1 SAT
            // Constante b calculada para decaimiento exacto en 500 pasos
            const a = 100; 
            const b = 0.046181;
            
            btcPrice = a * Math.exp(-b * (n - 1));
            
            // Forzado de precisi√≥n para el nodo final
            if (n === 500) btcPrice = 0.00000001;
            
            satsPrice = Math.round(btcPrice * 100000000);
            
            priceDisplay.innerHTML = `Price: ${btcPrice.toFixed(8)} BTC<br><small>(${satsPrice.toLocaleString()} SATS)</small>`;
            priceDisplay.style.color = "#d4af37";
        } else {
            // Nodos 501+ (Plebe): Precio informativo 1 SAT
            btcPrice = 0.00000001;
            satsPrice = 1;
            priceDisplay.innerHTML = `Price: ${btcPrice.toFixed(8)} BTC<br><small>(1 SAT)</small>`;
            priceDisplay.style.color = "#888";
        }
    }

    nodeInput.addEventListener('input', updatePrice);

    document.getElementById('issueContract').addEventListener('click', function(e) {
        e.preventDefault();
        const n = parseInt(nodeInput.value);

        if (n > 500) {
            alert("üõ°Ô∏è ¬°PACIENCIA, SOBERANO!\n\nEl Protocolo est√° en fase G√âNESIS exclusiva para los 500 Nodos Fundadores.\n\nTu turno llegar√° pronto. El acceso para la 'Plebe' (nodos 501+) se habilitar√° cuando la seguridad est√© sellada. ¬°Mantente atento a Nostr!");
            return;
        }

        if (!n || n < 1) {
            alert("Introduce un n√∫mero de nodo v√°lido (1-500).");
            return;
        }

        alert("Acceso validado para el Nodo Fundador #" + n + "\n\nIniciando proceso de redenci√≥n de deuda...");
    });
</script>

</body>
</html>
